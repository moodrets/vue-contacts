import{d as V,j as k,o as u,c as d,F as C,r as $,b as e,t as p,x as f,y as g,z as y,v as I,h as D,g as S,k as B,B as F,e as b,m as L,u as w,w as M,A as T}from"./index-2fbe6e7e.js";import{c as v,o as U}from"./useContacts-bfb12ea8.js";const q={class:"contact-tags"},A=["onClick"],E=["placeholder"],R=V({__name:"Tags",props:{tags:{}},setup(x){const i=x,s=k(""),r=t=>{i.tags.splice(t,1)},m=()=>{s.value===""&&i.tags.splice(i.tags.length-1,1)},l=t=>{if(i.tags.includes(s.value)){t.preventDefault(),s.value="";return}s.value&&(t.preventDefault(),i.tags.push(s.value),s.value="")};return(t,o)=>(u(),d("div",q,[(u(!0),d(C,null,$(t.tags,(a,h)=>(u(),d("div",{class:"contact-tags__label app-button app-button--light",key:a},[e("div",null,p(a),1),e("i",{onClick:N=>r(h),class:"material-icons"},"close",8,A)]))),128)),f(e("input",{onKeydown:[o[0]||(o[0]=y(a=>l(a),["enter"])),o[1]||(o[1]=y(a=>l(a),["tab"])),o[2]||(o[2]=y(a=>m(),["backspace"]))],class:"form-control",type:"text","onUpdate:modelValue":o[3]||(o[3]=a=>s.value=a),placeholder:i.tags.length?"":"Tags"},null,40,E),[[g,s.value]])]))}});const K={class:"contact-form"},j={key:0},z={key:1},P=["onSubmit"],G={class:"form-field"},H={class:"form-field__content"},J={class:"form-field"},O={class:"form-field__content"},Q={class:"form-field"},W={class:"form-field__content"},X={class:"form-field"},Y={class:"form-field__content"},Z={class:"form-field"},ee={class:"form-field__content form-field__content--flex"},te={type:"submit",class:"app-button app-button--primary"},se={class:"material-icons-round"},oe={class:"contact-form__actions"},le=V({__name:"Form",setup(x){const i=I(),s=D(),r=S(),m=+i.params.id,l=B(()=>m?"edit":"create"),t=k({email:"",fullName:"",phone:"",tags:[]}),o=k(t.value.fullName);if(m){const c=v.value.find(n=>n.id===m);c&&(o.value=c.fullName,t.value={...c})}const a=()=>{s.go(-1)},h=()=>{s.push({name:"contacts.list"})},N=()=>{if(l.value==="edit"&&window.confirm(`Are you sure to edit "${o.value}"?`)){let c=v.value.findIndex(n=>n.id===m);c!==-1&&(v.value[c]=t.value,r==null||r.show("success","Ð¡ontact edited"),T.setItem("contacts_list",v.value),a())}l.value==="create"&&(v.value.unshift({id:Date.now(),...t.value}),T.setItem("contacts_list",v.value),s.push({name:"contacts.list"}))};return(c,n)=>(u(),d("div",K,[l.value==="edit"?(u(),d("h1",j,[F("Edit contact "),e("strong",null,p(o.value),1)])):b("",!0),l.value==="create"?(u(),d("h1",z,"Create contact")):b("",!0),e("form",{onSubmit:M(N,["prevent"])},[e("div",G,[e("div",H,[f(e("input",{type:"text",required:"",class:"form-control",placeholder:"Name","onUpdate:modelValue":n[0]||(n[0]=_=>t.value.fullName=_)},null,512),[[g,t.value.fullName]])])]),e("div",J,[e("div",O,[f(e("input",{type:"email",required:"",class:"form-control",placeholder:"Email","onUpdate:modelValue":n[1]||(n[1]=_=>t.value.email=_)},null,512),[[g,t.value.email]])])]),e("div",Q,[e("div",W,[f(e("input",{type:"tel",required:"",class:"form-control",placeholder:"Phone","onUpdate:modelValue":n[2]||(n[2]=_=>t.value.phone=_)},null,512),[[g,t.value.phone]])])]),e("div",X,[e("div",Y,[L(R,{tags:t.value.tags||[]},null,8,["tags"])])]),e("div",Z,[e("div",ee,[e("button",te,[e("div",se,p(l.value==="edit"?"save_as":"save"),1),e("span",null,p(l.value==="edit"?"Save contact":"Create contact"),1)]),e("div",oe,[l.value==="edit"?(u(),d("div",{key:0,class:"icon-delete material-icons-round",onClick:n[3]||(n[3]=_=>w(U)(t.value,w(r),h))},"delete_outline")):b("",!0),e("div",{class:"icon-back material-icons-round",onClick:a},"arrow_back")])])])],40,P)]))}});export{le as _};
