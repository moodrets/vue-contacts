import{d as V,j as b,o as _,c as v,F as C,r as $,b as e,t as p,x as f,y as g,z as y,v as I,h as D,g as S,k as B,B as F,e as N,m as L,u as w,w as M,A as T}from"./index-54a242c2.js";import{c as m,o as U}from"./useContacts-e1819d90.js";const q={class:"contact-tags"},A=["onClick"],E=["placeholder"],R=V({__name:"Tags",props:{tags:{}},setup(k){const i=k,s=b(""),u=t=>{i.tags.splice(t,1)},d=()=>{s.value===""&&i.tags.splice(i.tags.length-1,1)},l=t=>{if(i.tags.includes(s.value)){t.preventDefault(),s.value="";return}s.value&&(t.preventDefault(),i.tags.push(s.value),s.value="")};return(t,o)=>(_(),v("div",q,[(_(!0),v(C,null,$(t.tags,(a,h)=>(_(),v("div",{class:"contact-tags__label app-button app-button--light",key:a},[e("div",null,p(a),1),e("i",{onClick:x=>u(h),class:"material-icons"},"close",8,A)]))),128)),f(e("input",{onKeydown:[o[0]||(o[0]=y(a=>l(a),["enter"])),o[1]||(o[1]=y(a=>l(a),["tab"])),o[2]||(o[2]=y(a=>d(),["backspace"]))],class:"form-control",type:"text","onUpdate:modelValue":o[3]||(o[3]=a=>s.value=a),placeholder:i.tags.length?"":"Tags"},null,40,E),[[g,s.value]])]))}});const K={class:"contact-form"},j={key:0},z={key:1},P=["onSubmit"],G={class:"form-field"},H={class:"form-field__content"},J={class:"form-field"},O={class:"form-field__content"},Q={class:"form-field"},W={class:"form-field__content"},X={class:"form-field"},Y={class:"form-field__content"},Z={class:"form-field"},ee={class:"form-field__content form-field__content--flex"},te={type:"submit",class:"app-button app-button--primary"},se={class:"material-icons-round"},oe={class:"contact-form__actions"},le=V({__name:"Form",setup(k){const i=I(),s=D(),u=S(),d=+i.params.id,l=B(()=>d?"edit":"create"),t=b({email:"",fullName:"",phone:"",tags:[]}),o=b(t.value.fullName);if(d){const c=m.value.find(n=>n.id===d);c&&(o.value=c.fullName,t.value={...c})}const a=()=>{s.go(-1)},h=()=>{s.push({name:"contacts.list"})},x=()=>{if(l.value==="edit"&&window.confirm(`Are you sure to edit "${o.value}"?`)){let c=m.value.findIndex(n=>n.id===d);c!==-1&&(m.value[c]=t.value,u==null||u.show("success","Ð¡ontact edited"),T.setItem("contacts_list",m.value),a())}l.value==="create"&&(m.value.unshift({id:Date.now(),...t.value}),T.setItem("contacts_list",m.value),s.push({name:"contacts.list"}))};return(c,n)=>(_(),v("div",K,[l.value==="edit"?(_(),v("h1",j,[F("Edit contact "),e("strong",null,p(o.value),1)])):N("",!0),l.value==="create"?(_(),v("h1",z,"Create contact")):N("",!0),e("form",{onSubmit:M(x,["prevent"])},[e("div",G,[e("div",H,[f(e("input",{type:"text",required:"",class:"form-control",placeholder:"Name","onUpdate:modelValue":n[0]||(n[0]=r=>t.value.fullName=r)},null,512),[[g,t.value.fullName]])])]),e("div",J,[e("div",O,[f(e("input",{type:"email",required:"",class:"form-control",placeholder:"Email","onUpdate:modelValue":n[1]||(n[1]=r=>t.value.email=r)},null,512),[[g,t.value.email]])])]),e("div",Q,[e("div",W,[f(e("input",{type:"tel",required:"",class:"form-control",placeholder:"Phone","onUpdate:modelValue":n[2]||(n[2]=r=>t.value.phone=r)},null,512),[[g,t.value.phone]])])]),e("div",X,[e("div",Y,[L(R,{tags:t.value.tags||[]},null,8,["tags"])])]),e("div",Z,[e("div",ee,[e("button",te,[e("div",se,p(l.value==="edit"?"save_as":"save"),1),e("span",null,p(l.value==="edit"?"Save contact":"Create contact"),1)]),e("div",oe,[e("div",{class:"icon-delete material-icons-round",onClick:n[3]||(n[3]=r=>w(U)(t.value,w(u),h))},"delete_outline"),e("div",{class:"icon-back material-icons-round",onClick:a},"arrow_back")])])])],40,P)]))}});export{le as _};
