import{d as k,o as r,c as u,b as t,w as h,t as g,F as w,r as b,e as x,n as f,u as v,f as E,g as P,h as R,i as V,A as I,j as q,k as T,l as A,m as D,q as M,s as F}from"./index-b6649619.js";import{c as $,o as j}from"./useContacts-bae1d362.js";const z={class:"contact-item__top"},O={class:"contact-item__name"},Q={class:"contact-item__email"},U={class:"contact-item__actions"},G={class:"contact-item__phone"},H={key:0,class:"contact-item__tags"},J=["onClick"],K=k({__name:"Item",props:{data:{},viewType:{default:"columns"}},emits:["remove","edit","link","tag"],setup(y,{emit:p}){const i=y;return(n,m)=>(r(),u("div",{class:f(["contact-item",`contact-item--${i.viewType}`])},[t("a",{class:"contact-item__inset-link",href:"#",onClick:m[0]||(m[0]=h(a=>p("link",i.data),["prevent"]))}),t("div",z,[t("div",O,g(i.data.fullName),1),t("div",Q,g(i.data.email),1),t("div",U,[t("span",{class:"icon-edit material-icons-outlined",onClick:m[1]||(m[1]=h(a=>p("edit",i.data),["stop"]))},"mode_edit"),t("span",{class:"icon-delete material-icons-outlined",onClick:m[2]||(m[2]=h(a=>p("remove",i.data),["stop"]))},"delete_outline")])]),t("div",G,g(i.data.phone),1),i.data.tags&&i.data.tags.length?(r(),u("div",H,[(r(!0),u(w,null,b(i.data.tags,a=>(r(),u("button",{type:"button",class:"app-button app-button--primary",onClick:h(l=>p("tag",a),["stop"])},g(a),9,J))),256))])):x("",!0)],2))}});const W=t("div",{class:"contacts-filter__header"},[t("span",{class:"material-icons-outlined"},"filter_list"),t("div",null,"Filter contacts")],-1),X=["onSubmit"],Y={class:"form-field"},Z=t("div",{class:"form-field__label"},"By name",-1),tt={class:"form-field__content"},et=["value"],st={class:"form-field"},ot=t("div",{class:"form-field__label"},"By email",-1),nt={class:"form-field__content"},at=["value"],it={class:"form-field"},lt=t("div",{class:"form-field__label"},"By phone",-1),ct={class:"form-field__content"},rt=["value"],dt={class:"form-field"},_t=t("div",{class:"form-field__label"},"By tags",-1),ut={class:"form-field__content form-field__content--flex"},mt=["onClick"],pt=k({__name:"Filter",props:{contacts:{default:()=>[]},fields:{default:()=>({name:"",email:"",phone:"",tag:""})},tagList:{default:()=>[]}},emits:["filter"],setup(y,{emit:p}){const i=y,n=()=>{},m=l=>{p("filter",{key:"tag",value:i.fields.tag===l?"":l})},a=E((l,d)=>{p("filter",{key:d,value:l.target.value})},300);return(l,d)=>(r(),u("div",{class:f(["contacts-filter",l.contacts.length===0?"contacts-filter--disabled":""])},[W,t("form",{onSubmit:h(n,["prevent"])},[t("label",Y,[Z,t("div",tt,[t("input",{value:l.fields.name,type:"text",class:"form-control",onInput:d[0]||(d[0]=c=>v(a)(c,"name"))},null,40,et)])]),t("label",st,[ot,t("div",nt,[t("input",{value:l.fields.email,type:"text",class:"form-control",onInput:d[1]||(d[1]=c=>v(a)(c,"email"))},null,40,at)])]),t("label",it,[lt,t("div",ct,[t("input",{value:l.fields.phone,type:"text",class:"form-control",onInput:d[2]||(d[2]=c=>v(a)(c,"phone"))},null,40,rt)])]),t("div",dt,[_t,t("div",ut,[(r(!0),u(w,null,b(l.tagList,c=>(r(),u("button",{key:c,type:"button",class:f(["app-button",l.fields.tag===c?"app-button--primary":"app-button--light"]),onClick:C=>m(c)},g(c),11,mt))),128))])])],40,X)],2))}});const ft={class:"page-layout"},vt={class:"page-layout__aside"},ht={class:"page-layout__content"},gt={class:"contacts-list__top"},yt=t("div",null,null,-1),$t={class:"contacts-list__view-type"},kt={class:"contacts-list__content"},wt={key:1,class:"not-found-text"},bt=t("div",{class:"material-icons-round"},"developer_board_off",-1),Ct=t("span",null,"Contacts not found",-1),Lt=[bt,Ct],Ft=k({__name:"ContactsList",setup(y){const p=P(),i=R(),n=V({name:"",email:"",phone:"",tag:""}),m=I.getItem("contacts_view_type"),a=q(m||"rows"),l=T(()=>{let s=[];return $.value.forEach(e=>{e.tags&&s.push(...e.tags)}),[...new Set(s)]}),d=T(()=>{let s=[...$.value];return n.name&&(s=s.filter(e=>{const o=e.fullName.toLocaleLowerCase(),_=n.name.toLocaleLowerCase();if(o.includes(_))return e})),n.email&&(s=s.filter(e=>{if(e.email.includes(n.email))return e})),n.phone&&(s=s.filter(e=>{const o=F(e.phone),_=F(n.phone);if(o.includes(_))return e})),n.tag&&(s=s.filter(e=>{var o;return(o=e.tags)==null?void 0:o.includes(n.tag)})),s}),c=s=>{a.value=s,I.setItem("contacts_view_type",s)},C=s=>{i.push({name:"contacts.view",params:{id:s.id}})},S=s=>{i.push({name:"contacts.edit",params:{id:s.id}})},L=()=>{let s={};for(const e in n){let o=n[e];o!==""&&(s[e]=o)}i.push({name:"contacts.list",query:s})},B=s=>{n.tag=s,L()},N=s=>{n[s.key]=s.value,L()};return A(()=>{new URLSearchParams(document.location.search).forEach((e,o)=>{o in n&&(n[o]=e)})}),(s,e)=>(r(),u("div",ft,[t("aside",vt,[D(pt,{contacts:v($),fields:n,"tag-list":l.value,onFilter:e[0]||(e[0]=o=>N(o))},null,8,["contacts","fields","tag-list"])]),t("main",ht,[d.value.length?(r(),u("div",{key:0,class:f(["contacts-list",`contacts-list--${a.value}`])},[t("div",gt,[yt,t("div",$t,[t("span",{class:f([a.value==="rows"?"material-icons-round":"material-icons-outlined",{"is-active":a.value==="rows"}]),onClick:e[1]||(e[1]=o=>c("rows"))},"view_list",2),t("span",{class:f([a.value==="columns"?"material-icons-round":"material-icons-outlined",{"is-active":a.value==="columns"}]),onClick:e[2]||(e[2]=o=>c("columns"))},"view_module",2)])]),t("div",kt,[(r(!0),u(w,null,b(d.value,o=>(r(),M(K,{key:o.id,data:o,"view-type":a.value,onLink:e[3]||(e[3]=_=>C(_)),onEdit:e[4]||(e[4]=_=>S(_)),onRemove:e[5]||(e[5]=_=>v(j)(_,v(p))),onTag:e[6]||(e[6]=_=>B(_))},null,8,["data","view-type"]))),128))])],2)):(r(),u("div",wt,Lt))])]))}});export{Ft as default};
