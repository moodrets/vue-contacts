import{d as V,j as b,o as m,c as v,F as C,r as $,b as e,t as f,x as p,y as g,z as y,v as I,h as D,g as S,k as B,B as F,e as N,m as L,u as w,w as M,A as T}from"./index-b6649619.js";import{c as _,o as U}from"./useContacts-bae1d362.js";const q={class:"contact-tags"},A=["onClick"],E=["placeholder"],R=V({__name:"Tags",props:{tags:{}},setup(k){const i=k,n=b(""),u=t=>{i.tags.splice(t,1)},d=()=>{n.value===""&&i.tags.splice(i.tags.length-1,1)},l=t=>{if(i.tags.includes(n.value)){t.preventDefault(),n.value="";return}n.value&&(t.preventDefault(),i.tags.push(n.value),n.value="")};return(t,s)=>(m(),v("div",q,[(m(!0),v(C,null,$(t.tags,(o,h)=>(m(),v("div",{class:"contact-tags__label app-button app-button--light",key:o},[e("div",null,f(o),1),e("i",{onClick:x=>u(h),class:"material-icons"},"close",8,A)]))),128)),p(e("input",{onKeydown:[s[0]||(s[0]=y(o=>l(o),["enter"])),s[1]||(s[1]=y(o=>l(o),["tab"])),s[2]||(s[2]=y(o=>d(),["backspace"]))],class:"form-control",type:"text","onUpdate:modelValue":s[3]||(s[3]=o=>n.value=o),placeholder:i.tags.length?"":"Tags"},null,40,E),[[g,n.value]])]))}});const K={class:"contact-form"},j={key:0},z={key:1},P=["onSubmit"],G={class:"form-field"},H={class:"form-field__content"},J={class:"form-field"},O={class:"form-field__content"},Q={class:"form-field"},W={class:"form-field__content"},X={class:"form-field"},Y={class:"form-field__content"},Z={class:"form-field"},ee={class:"form-field__content form-field__content--flex"},te={type:"submit",class:"app-button app-button--primary"},oe={class:"material-icons-round"},se={class:"contact-form__actions"},le=V({__name:"Form",setup(k){const i=I(),n=D(),u=S(),d=+i.params.id,l=B(()=>d?"edit":"create"),t=b({email:"",fullName:"",phone:"",tags:[]}),s=b(t.value.fullName);if(d){const c=_.value.find(a=>a.id===d);c&&(s.value=c.fullName,t.value={...c})}const o=()=>{n.go(-1)},h=()=>{n.push({name:"contacts.list"})},x=()=>{if(l.value==="edit"&&window.confirm(`Are you sure to edit "${s.value}"?`)){let c=_.value.findIndex(a=>a.id===d);c!==-1&&(_.value[c]=t.value,u==null||u.show("success","Ð¡ontact edited"),T.setItem("contacts_list",_.value),o())}l.value==="create"&&(_.value.unshift({id:Date.now(),...t.value}),T.setItem("contacts_list",_.value),o())};return(c,a)=>(m(),v("div",K,[l.value==="edit"?(m(),v("h1",j,[F("Edit contact "),e("strong",null,f(s.value),1)])):N("",!0),l.value==="create"?(m(),v("h1",z,"Create contact")):N("",!0),e("form",{onSubmit:M(x,["prevent"])},[e("div",G,[e("div",H,[p(e("input",{type:"text",required:"",class:"form-control",placeholder:"Name","onUpdate:modelValue":a[0]||(a[0]=r=>t.value.fullName=r)},null,512),[[g,t.value.fullName]])])]),e("div",J,[e("div",O,[p(e("input",{type:"email",required:"",class:"form-control",placeholder:"Email","onUpdate:modelValue":a[1]||(a[1]=r=>t.value.email=r)},null,512),[[g,t.value.email]])])]),e("div",Q,[e("div",W,[p(e("input",{type:"tel",required:"",class:"form-control",placeholder:"Phone","onUpdate:modelValue":a[2]||(a[2]=r=>t.value.phone=r)},null,512),[[g,t.value.phone]])])]),e("div",X,[e("div",Y,[L(R,{tags:t.value.tags||[]},null,8,["tags"])])]),e("div",Z,[e("div",ee,[e("button",te,[e("div",oe,f(l.value==="edit"?"save_as":"save"),1),e("span",null,f(l.value==="edit"?"Save contact":"Create contact"),1)]),e("div",se,[e("div",{class:"icon-delete material-icons-round",onClick:a[3]||(a[3]=r=>w(U)(t.value,w(u),h))},"delete_outline"),e("div",{class:"icon-back material-icons-round",onClick:o},"arrow_back")])])])],40,P)]))}});export{le as _};
